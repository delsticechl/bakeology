<section class="cart-page fade-in">
  <div class="cart-container">
    <h2>Your Cart</h2>

    <% if (!cart || cart.CartItems.length === 0) { %>
      <p class="empty-cart">Your cart is empty. <a href="/">Shop now</a></p>
    <% } else { %>

      <table class="cart-table">
        <thead>
          <tr><th>Item</th><th>Price</th><th>Quantity</th><th>Subtotal</th><th></th></tr>
        </thead>
        <tbody>
          <% let total = 0; %>
          <% cart.CartItems.forEach(item => { %>
            <% const subtotal = item.quantity * item.Cake.price; total += subtotal; %>
            <tr data-itemid="<%= item.id %>">
              <td class="cart-product">
                <strong><%= item.Cake.title %></strong>
              </td>
              <td><%= item.Cake.price.toLocaleString() %>đ</td>
              <td><input class="qty-input" type="number" min="0" value="<%= item.quantity %>" /></td>
              <td class="subtotal"><%= subtotal.toLocaleString() %>đ</td>
              <td><button class="remove-btn">Remove</button></td>
            </tr>
          <% }) %>
        </tbody>
      </table>

      <div class="cart-summary">
        <strong>Total: <span id="total"><%= total.toLocaleString() %></span>đ</strong>
        <a href="/checkout" class="hero-btn">Checkout</a>
      </div>

    <% } %>
  </div>
</section>